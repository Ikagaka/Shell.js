「ドーモ。イカッツァンです」
【ゴーストプレイヤー フロムウエブブラウザア】 - Lv.2
（前回までのあらすじ：コトダマ空間でのシェル再生に成功したイカッツァンと、同じく栞プログラム起動に成功したナラサカ＝サン。
互いのプログラムを組み合わせることで、伝説の「ウェブゴースト」が実現できることに気がついたふたりは、念願のウェブゴーストプレイヤー「イカガカ」を誕生させた！）
主催注：「如何か」の説明とデモとなる見込みです
資料・録音など：(準備中)

■（ここにナラサカ＝サンの講演15分くらい。）

■ネタ帳
みなさん、長丁場お疲れ様です。
まずは肩のコリでもほぐすストレッチをしてみましょうか

■
タイトルはゴーストプレイヤー フロムウエブブラウザアということです
タイトルの通り、今日私が皆さんにお伝えしたいことは「ゴーストとウエブブラウザで動くようになりました」
ということにつきます。
ここで皆さんは幾つかの疑問が生じると思いますが
一つずつ解説していきたいと思います

■ウエブブラウザで動くとはどういうことか
ブラウザJavaScriptでnarをダウンロードして
解凍して、シェルはsurfaces.txtを解釈してcanvas要素に書き出されます
このセリコアニメイシヨンの描画エンジンを私が作っているわけです
栞dllはその種類に応じて内蔵のJS栞を選択して、辞書を読み込ませています
このJS栞とは既存の栞をjsで再実装したわけではありません
emecriptenというc言語からjavascriptへのトランスコンパイラ技術を利用しています
つまり栞そのものをソースコードからjsに変換しているわけで、その動作は従来の栞dllとほとんど変わりません

■ウエブブラウザで動くと何が嬉しいのか
スマートフォンで動くようになります。
アンドロイド、あいほん関係なく。
アプリのインストールすら不要です。
それだけでなく、ウインドオーズーやマッキントッシュのデスクトップ、UNIXでも動くようになります

■ウエブブラウザで動かすことの代償は
既存の栞dllがつかえません
もっと深刻なのはサオリdllはもっと使えません
サオリdllはウインドオーズーのapiを触ることが多いからです
例えばオスワリリイはウインドオーズーAP愛を使って
ウインドウの上にお座りしますが、これはブラウザでは対応できませんね

■実装上困難だったことは
エッチTMエル5のカンバス要素によりアニメイシヨンの実現は比較的古くから実現されていましたが
2010ねんくらい
ナーのZIP解凍もライブラリの登場でできるようになりました
シフトジェーエスをUnicodeに直してジャッバスクリプトで扱うのもほぼ同時にできるようになりました
2012ねんくらい
最後まで問題だったのは栞の実装でした
たくさんある栞を全てジャッバスクリプトで再実装するのは実際すごく困難です
それが2014ねんごろにエムスクリプ店という技術が出来まして、
これを使うことで栞がジャッバスクリプトに変換できるようになりました
そしてついにウエブブラウザだけでナーからゴーストをマテリアライズできるようになったのです
現在の問題といたしましてはウカガカには明確な仕様の情報がないので
例えばシェル描画エンジンに関しては私のカンと独自解釈が多く含まれています
特に私はさいきんウインドオーズーを持っていないので
SSピーの実際のアニメイシヨンがsurfaces.txtをどう解釈してるのかは謎です
イカガカで動いてるアニメイシヨンとSSピーのアニメイシヨンを比べたことがないのです

■現在の問題は
私の書いたコードがとても読めたものでないので
次の世代にたくせるようにコードを整備しています
オープンソースの利点です
あとはサオリをどう実装するのかという意見ですね
課題としては
各種の設定ファイルやさくらスクリプトの形式文法を
正しく定義して再利用可能なパーサを作ることですね

■イカガカってナニ？
私が2008ねんくらいから試みている
ウエブブラウザアでゴーストを起動するためのソフトウェアの名前です
現在は私ひとりで開発してるわけではなくナラサカ=サンとの分業体制になりつつありますし
ソフトウェアの各部分のコンポーネント化を進めているのでひとつのソフトウェアの名前の意味は失いました
現在は大まかに
ベースウェアの基礎的な機能を司るコンポーネントを「ナニカ」と
シェル描画を司るコンポーネントをカトルボーンに分かれています

■新たにベースウェアを新規設計する上で気をつけたことは
まずオープンソース化です。
これは気をつけるまでもないことですが
現在のSSピーはクローズドソースで完全にぽなさんに依存しています
そして例えば描画部分だけを抜き出して他のソフトウェアが使うことができませんでした
そのため、シェル開発支援ソフトウェアは、せいぜいエレメント合成と触り判定自動化ツール程度しかありませんでした
アニメイシヨンの開発にはSSピーを起動してsurfaces.txtを編集してシェル再読み込み。といったステップを踏まざるを得ませんでした
そのためイカガカの開発において一番念頭に置いたのは既存のベースウェアの機能をコンポーネントに分割して
バラバラでも使えるようにしよう、ということでした。
バラバラにしたことによる恩恵はナラサカ=サンとの共同作業がしやすくなった
ということによくあらわれています
ナラサカ=サンは栞周りとベースウェア担当、私はシェル描画エンジン担当、といった分業が可能になりました
もうひとつ念頭に置いていたのは
シェル描画エンジンを交換できるようにすることです
シェル描画エンジンをキチンとわけることによって、
栞の切り替えのように、支援描画エンジンもゴーストマスタさんが選択できるような未来が来たらいいなと思ってます。ハイ。

■カトルボーンとは何か
イカガカシェルAP愛にもとずく描画エンジンです

■イカガカシェルAP愛仕様とは
さくらスクリプトにおけるシェル関連のコマンドを抜き出してAPIにしました
たとえば
named(hwind).scope(0).surface(0).blimp(0).talk("こんにちは")
って書けます
こう書ければシェルがpngだろうがsvgだろうが3dcgだろうがロボットだろうが、
なんでもいいわけです。ベースウェアには知ったこっちゃない。

■私の意見は何か
windows衰退の危機=SSPの危機
ウエブページで配布してるんだからウエブページに起動できるべきでは
オープンソースと拡張性
Windows10でssp.exeはしばし安泰
まあ結局延命だよね
終末医療

■あなたが本当に言いたかったことは何ですか
ウエブブラウザで動く時代にします

■聴衆について。何を聴きに来たの？
伺かというコミュニティーの活性化を期待
かつての栄光を再び

■論点は簡潔に


■あらためまして
既存のウカガカシステムの問題点を挙げまして
それからウエブのゴーストプレイヤーを新規設計する
上でかんがえなければいけないこと、繁栄したことを列挙していきたいと思います


■イカガカに関する5つの最大の疑問と答え






■さて、ここで実演コーナーに入ってみましょう
軽作業のお時間です
みなさんはここにさくらスクリプトを入力しまして、私は前でそれを再生しましょう
ゴーストはいくつか選択できるようにしてあります。
何かセリフを考えて喋らせてみましょう



■これから30分間お話をします
要点は5つです
それぞれの要点に5分間使って、
残りは質問時間にします

さて本日のアウトラインですが
1
2
3
4
5
となります

■太古の昔から
人々はウェブゴーストを求めてきました
（ここに過去の例)
(あのみ、Webさくら、flashで動く前回のうかべんのアレ、colors)
(根付かなかった理由)
(ドキュメントがない。サンプルがない。実績がない。公演で発表して終わってる)
そのため私はドキュメントと利用例を示すことに最も注意を払わねばなりません

「ウェブで動くゴースト開発環境」


■現在、ウカガカは危機に瀕しています
現在、あなたが伺かのnewbieだとしましょう。
あなたはどこでウカガカのことを知るでしょうか？
好きな絵師さんのHP？すきな創作さんのTwitter？pixiv？
そしてそのスクショを見て、キャラクターについてしりたくなったとしましょう、
あなたは創作さんのhpに行って、スクショとnarとsspのリンクを見て気がつくわけです。
「ああ、これはウインドオーズーじゃないと動かないんだ」と。
これではnewbieが増えるわけがありません。
現在インターネットを利用する人の8割はスマートホンを利用しているのですから。

この絶望的状況を打破すべく、イカガカは開発されています。

ツイッターやpixivでキャラクターの存在を知る。
作者のhpを開く。
するとどうでしょう？そのhpにはすでにゴーストが立っているのです！
もう「ウインドオーズー持ってないから使えないな」などと諦めることはなくなります。
通勤電車の中で。休日のツイッターのリンク先で、ゴーストと即その場で会える機会を提供するわけです

■コンポーネント化による利点3つ
1部分的再利用
2共同開発
3


■現在ウインドウズを使ってる方はどれくらいいらっしゃいますか？
みなさん手を上げてください
ウインドウxpずをつがてるひと
ビスタ
セブン
エイト
マックを使ってるひと
それ以外のひと
おっとあなたは何を使ってますか？
なるほど。ここに集まってる方の半分は知らないのではないでしょうか
これ知ってるひと手を上げて？
なるほど。
最近使ってるパココンがスマートホンだというひとは？


■導入、人間である私がする
緊張をほぐすような人間的対応。
手を上げさせたり。
機械的にはできないインタラクティブなセッション

あるいは影で予想された選択肢を選ぶとか？

中盤、技術や動機。
物語を語る。機械的な話すべき内容、
あらかじめ決められていた内容を語るセッション
ゴーストに任せる

最後に総括



クロウやダエはバイナリ配布が終了してしまいました
SSピーやマテリアはどうでしょう？
仮にマテリアが10年後も配布されているとして、それをどうやって
動かせば良いのでしょう？
ウインドウず2000もxpも、もはや存在しないのです！

私はインターネットアーカイブの中で生き続けるウェブゴーストの姿に感動しました
これがあるべきゴーストの形だ。そう確信しました。

私には夢があります。
インターネットアーカイブの中に生き残ったゴーストが、
100年後の考古学者を驚かせることです。

現代の知識の大部分は本と、データベースの中に生きています
ウェブブラウザはデータベースの閲覧環境であり、
閲覧できるデータは文書だけではないのです。

今日私が話したかったこと。
1ウェブブラウザだけでゴーストが起動できるようになった！
そしてスマートホンで見られるようになった！
その結果Web魚拓の中でも生きられるようになった！
以上です。

1。イカガカのデモ。

2。イカガカのコンポーネントであるカトルボーンを使うことで何ができるようになるのか。
実演デモ。

3実践応用編

ウェブ魚拓の中で動くゴーストという可能性

トピックごとにアウトラインを再表示
ここまできました。残り15分ですね。
頑張りましょう。


■ 「真のプレゼンターとは俺自身がパワポになることだ」


■NarLoader+cuttlebone+簡易台本システムで即日有用なアプリが作れることを証明したかった


■Shell APIについてひとつづつ詳しく




忍殺アニメシェルでデモしたい

現行の伺かシステムと何が違うのか
栞はどう置き換えられたのか
さくらスクリプトはなんなのか
何が問題なのか

shell.js, named.js, ikagaka apiの提案

ikagakaの動作環境、栞はどこで動くのか？
シェルはどこでうごくのか？
何が動くようになったのか、何が動かないのか
インストラクション・ワン！
SSP「サヨナラ！」しめやかに爆発四散！
動くゴースト、動かないゴースト
ナラザカ=サンとイカッツァンによる紙芝居

プレゼンライブラリと連携、というかカトルボーンと一体化
いかゅう と ネギ
ドーモ、イカッツァンです。
ゴーストプレイヤーアー
イカガカ
ウェッブゴースト
ベースウェヤー
イヤーッ
グワーッ
クソザコ仕草

ウェッブブラウザとイカガカのしくみの対比

いかゅう「サヨナラ！！！」

デフォ子、
ヤセンダイ=サンとヤモト=サンを参考に


アホの子
元気
フハハハハ！やったぜ！
えー。もーそーゆーこというのやめよーよー
わたしむっつかしーはなしわっかんなーい
コラッ！何すんのよこのバーカー！
ちょ！やめなさいよ！
いい加減にして！信じられない！
へっへっへーやったぜ


今から使えるカトルボーン
surfaces.txtのライブ編集ソフト
左にsurfaces.txt、右に全てのサーフェスのプレビュー


講演の最中に肩をほぐすゴースト


カトルボーン使いつつnw.jsでデスクトップで動かす


つくつくぼーしのなく理由、引き込み？同期？なぜツクツクボウシはツクツクボウシとなくのか

1月15日@duxca
クソザコbot@duxca

鍵RT: "伺か(と互換処理系)のダメなところ、10年経っても未だデスクトップマスコットというステートフルな概念に囚われているところだと思うし、いつまでも無限にワナビの人たちが車輪の再発明をし続けていることだと思う。"
posted at 05:12:02


twilog.org/duxca/date-150115

http://t.co/A2OkK6E2Wc

コンテキストメニュー実装のためのShell.jsからのイベントバブリング


12月28日@duxca
奈良阪@narazaka

如何かでSAORI動くようになったら如何か用SAORI DLLメンテしてくれるあたりも探さなきゃならん。たくさんあるので現状の僕とレゴキチ(旧)さんだけでなんとかするのは厳しい。 #伺かweb忘年会
Retweeted by クソザコbot
retweeted at 06:19:51


部屋を片付けない子供に「全部すてるよ?」って脅すと、だんだん片付けるようになるし、
テストしない人に「テストしろクソ野郎」って強い言葉でいうと、そのうち何割かはテストする人になるし、
ドキュメント書かない人に「書けよクソ野郎」って強い言葉でいうと、そのうち何割かは書くようになる



http://t.co/7RVRcZBaRN
http://t.co/dbtlAJ8A2H

12月24日@duxca
えちょ@ekicyou

さっきのWebさくらだけど、辞書はこんな感じ。このhtmlをcssで絞り込んでどこいつ解釈してます。http://ekicyou.github.io/old/web-sakuraareka/dic_sakura_talk.html…
Retweeted by クソザコbot
retweeted at 01:19:30

12月24日@duxca
えちょ@ekicyou

@narazaka CSSセレクタでのDOM検索ってブラウザ表示系レスポンスに直結するから各ブラウザともすごくチューニング入ってるんですよね。だから絞り込み条件が複雑などこいつ辞書の置き場所にはJS直書きより向いてるんじゃないかなーという安易な考えだったりしまする。
Retweeted by クソザコbot
retweeted at 01:20:06



長年の悲願？であったWebベースウェア元年となりました。
如何か http://ikagaka.github.io/Ikagaka.demo/
SAORI対応にめどがつくかもという機運も出てきたところ、今後も完成度を高めていきます。乞うご期待。
#伺かweb忘年会 #ukagaka #伺か




# 如何かについて述べよ


## 問い: 如何かとSSPの違い

## ブラウザ環境使うので様々なデバイスで動く。ブラウザAPIを呼べるので開発が楽。MIT。

# 序論

## 問題点の分析

### SSPの問題点
 - SSPはクローズドソース
 - 属人性高杉

### 伺かそのものの問題点
 - 仕様がない
  - バージョニングも曖昧
 - 栞の移植性
 - シェル描画系の移植性とパッケージ化

### 時代の変化
- Windowsとデスクトップの終焉
 - タブレット、スマホ、VR
- ブラウザSPAかプラットフォームアプリかの二極化
 - Steam、AppStore、Marketplace、Xbox

## 次世代の伺か互換環境に求められているもの
- オープンソース
- マルチプラットフォーム
- コンポーネント化
- SSP(相互)互換
- 仕様の明確化

## 今までの試み

- SSPのWine化
- NinixAya X
- DAE、.NET
- COLORS Silverlight
- あの人に会いたい Android
- 如何か WebBrowser

# 如何か

## 前歴
- ブラウザでゴースト動かしたい、ブラウザだけで完結する開発環境作りたいけど
 - GoogleMapの頃、Canvasが辛うじて出てきたころ
 - ネットワーク更新用ファイル使う
- シェルアニメーションまではなんとか動いた
- 栞移植どうするの、で詰んでた

## 時代が追いついた
- V8の登場とJS高速化
- LLVM、emscripten
 - 栞をJS化できるように
- HTML5の各種API
 - 開発が飛躍的に楽に
- JSZip
 - 自力でnar解凍

## 奇跡の出会い
- 奈良坂氏「JS栞作った。シェル描画系めどい」
- 私「シェル描画系作った。JS栞めどい」
やったぜ

## 現在まで進んだ実装
- スマホで動く
- 簡単な状態保存
- デスクトップでも動く

## 現在の問題点
- ファイルシステムどうする？
- どこまで仕様標準化するか
- 開発言語、CoffeeかTypeかES6かBabelか
- 飽き

## なぜコンポーネントに分けたか
- 再利用性を高める
- 例:Shell.jsだけつかったアプリ等

## IKagaka API
- Shioriすげ替え
- SakuraScript以外の解釈エンジン
- シェル描画系のすげ替え

## 今後の展望
- WebIDE
- 3Dシェル
 - VR空間
- 実体のあるシェル
- 随意運動と非随意運動を分けたシェル
- ゴーストの実態はWebサーバー。クラウド栞。
